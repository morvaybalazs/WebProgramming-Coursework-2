// make functions ready when the document is loaded
$(document).ready(function () {

    // hide login and signup forms 
    $('#login').hide();
    $('#signup').hide();

    // toggles forms when clicking on the required area
    $('.login-hide-button').on('click', () => {
        $('#login').slideToggle()
    });

    $('.signup-hide-button').on('click', () => {
        $('#signup').slideToggle()
    });

    // animates footer button when mouse is over, returns to normal when mouse is off 
    $("#totop-button").mouseenter(function () {
        $("#totop-button").animate({ fontSize: '80px' }, 40);

        $("#totop-button").mouseleave(function () {
            $("#totop-button").animate({ fontSize: '50px' }, 40);
        });

    });


    // hides sub account in navbar
    $(".sub-account").hide();

    // on click slide toggles siblings of nav account 
    $('.nav-account').on('click', (event) => {
        $(event.currentTarget).siblings('.sub-account').slideToggle();
    });

    // search function for causes, takes input uses lowercase version to find, toggles the undesired posts 
    $("#mySearch").on("keyup", function () {
        var value = $(this).val().toLowerCase();
        $("#postList li").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    });


    // counts clicks on button +1 for signature -1 for unsign starting from 0 always returns the new value 
    $('#signatures0').data('count', 0);
    $('#sign0').click(function () {
        $('#signatures0').html(function () {
            var $this = $(this),
                count = $this.data('count') + 1;

            $this.data('count', count);
            return count;
        });
    });

    $('#signatures0').data('count', 0);
    $('#unsign0').click(function () {
        $('#signatures0').html(function () {
            var $this = $(this),
                count = $this.data('count') - 1;

            $this.data('count', count);
            return count;
        });
    });

    // counts clicks on button +1 for signature -1 for unsign starting from 0 always returns the new value 
    $('#signatures1').data('count', 0);
    $('#sign1').click(function () {
        $('#signatures1').html(function () {
            var $this = $(this),
                count = $this.data('count') + 1;

            $this.data('count', count);
            return count;
        });
    });

    $('#signatures1').data('count', 0);
    $('#unsign1').click(function () {
        $('#signatures1').html(function () {
            var $this = $(this),
                count = $this.data('count') - 1;

            $this.data('count', count);
            return count;
        });
    });

    // counts clicks on button +1 for signature -1 for unsign starting from 0 always returns the new value 
    $('#signatures2').data('count', 0);
    $('#sign2').click(function () {
        $('#signatures2').html(function () {
            var $this = $(this),
                count = $this.data('count') + 1;

            $this.data('count', count);
            return count;
        });
    });

    $('#signatures2').data('count', 0);
    $('#unsign2').click(function () {
        $('#signatures2').html(function () {
            var $this = $(this),
                count = $this.data('count') - 1;

            $this.data('count', count);
            return count;
        });
    });

    // counts clicks on button +1 for signature -1 for unsign starting from 0 always returns the new value 
    $('#signatures3').data('count', 0);
    $('#sign3').click(function () {
        $('#signatures3').html(function () {
            var $this = $(this),
                count = $this.data('count') + 1;

            $this.data('count', count);
            return count;
        });
    });

    $('#signatures3').data('count', 0);
    $('#unsign3').click(function () {
        $('#signatures3').html(function () {
            var $this = $(this),
                count = $this.data('count') - 1;

            $this.data('count', count);
            return count;
        });
    });

    // fade out animation for footer button when scrolling, 400 px down from top appears, above fades out   
    var btn = $('#totop-button')
    $(window).on("scroll", function () {
        var scrollPos = $(window).scrollTop();
        if (scrollPos <= 400) {
            $("#totop-button").fadeOut();
        } else {
            $("#totop-button").fadeIn();
        }
    });

    // on click scroll to top of page animation 
    btn.on('click', function (event) {
        event.preventDefault();
        $('html, body').animate({ scrollTop: 0 },);
    });

    //displays contents of the post text area in preview
    $('.postText').on('keyup', (event) => {
        $('.preview').html($(event.currentTarget).val());

    });

    // hides preview 
    $('#post0').hide();

    // shows preview when post button is clicked 
    $('.btn-post').click(function () {
        $('#post0').fadeIn()

    });

});